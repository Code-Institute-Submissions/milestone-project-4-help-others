{% extends 'base.html' %}

{% block head_title %}{{ project.name|title }} | Details{% endblock %}

{% block content %}
<header class="container-fluid top-container">
	<div class="row top-pic" title="group of kids"></div>
	<h2 class="col-12 top-header">{{ project.name|title }}</h2>
</header>

<section class="container section-container">

	<div class="row panel-row">
		<div class="col-xs-10 col-xs-offset-1 col-sm-6 col-sm-offset-0 col-md-4 display panel panel-default">
			<div class="panel-body">
				<div class="project" style="background-image: url('{{ MEDIA_URL }}{{ project.image }}')"></div>
				<hr>
				<h3>{{ project.name }}</h3>
				<h5><strong>{{ project.category }}</strong></h5>
				<p class="project-description">{{ project.description }}</p>

				{% if user.is_authenticated %}
				<form method="post" action="{% url 'add_to_cart' project.id %}">
					{% csrf_token %}
					<div class="input-group">
						<label for="exampleInputAmount" class="sr-only">Add Amount in Euro</label>
						<div class="input-group-prepend">
							<span class="input-group-text">â‚¬</span>
						</div>
						<input name="amount" type="number" min="5" max="99999" class="form-control" placeholder="Enter Amount">
						<div class="input-group-append">
							<button class="btn btn-secondary" type="submit" data-toggle="modal" data-target="#shoppingModal"><i class="fa fa-plus-circle btn-icon" aria-hidden="true"></i>Add</button>
						</div>
					</div>
				</form>
				{%  else %}
				<p>Please <a href="{% url 'login' %}">login</a> or <a href="{% url 'register' %}">register</a> to
					donate.</p>
				{% endif %}

                {% if user.is_authenticated and user == project.added_by %}
                <div class="text-center">
                    <a href="{% url 'edit_project' project.pk %}" class="btn btn-light read-btn"><i class="fa fa-pencil-square-o btn-icon" aria-hidden="true"></i>Edit</a>
                    <button class="btn btn-danger read-btn" data-toggle="modal" data-target="#deleteModal"><i class="fa fa-trash btn-icon" aria-hidden="true"></i>Delete</button>
                </div>
                {% endif %}
			</div>
		</div>
	</div>
</section>

<div class="modal" id="deleteModal" tabindex="-1" role="dialog" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">{{ project.name|title }}</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <p>Are you sure you want to delete this project?</p>
            </div>
            <div class="modal-footer">
                <a href="{% url 'delete_project' project.pk %}" class="btn btn-danger">Yes</a>
                <button type="button" class="btn btn-secondary" data-dismiss="modal">No</button>
            </div>
        </div>
    </div>
</div>

<button onclick="topFunction()" id="myBtn" class="btn btn-warning" title="Go to top"><i class="fa fa-angle-up" aria-hidden="true"></i></button>
{% endblock %}